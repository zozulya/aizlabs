<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600&display=swap" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;600&display=swap"></noscript>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>{{ page.title }} | {{ site.title }}</title>
  <!-- <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}"> -->
  <style>
    a:link,
    a:visited {
      color: #4DA3FF;
      text-decoration: underline;
    }

    nav a {
      margin: 0 1.2em;
    }

    body {
      background: #0a0a0a;
      color: rgb(241, 237, 237);
      text-align: center;
    }

    .page-container {
      max-width: 700px;
      margin: 3rem auto 2rem auto;
      background: rgb(17, 14, 14);
      color: white;
      border-radius: 12px;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.07);
      padding: 2.5rem 2rem;
      text-align: left;
    }

    h1 {
      font-size: 2.1rem;
      margin-bottom: 1.2rem;
    }

    h2 {
      font-size: 1.3rem;
      margin-top: 2rem;
      margin-bottom: 0.7rem;
    }

    p,
    ul,
    ol {
      font-size: 1.08rem;
      line-height: 1.7;
      margin-bottom: 1.1rem;
    }

    ul,
    ol {
      padding-left: 1.5em;
    }

    @media (max-width: 600px) {
      .page-container {
        padding: 1.2rem 0.7rem;
      }

      h1 {
        font-size: 1.4rem;
      }
    }
  </style>
</head>

<body>
  <header>
    <nav>
      <!-- Navigation links can go here -->
      <a href="{{ '/' | relative_url }}">Home</a>
      <a href="{{ '/impressum/' | relative_url }}">Impressum</a>
      <a href="{{ '/privacy-policy/' | relative_url }}">Privacy Policy</a>
    </nav>
  </header>
  <main>
    <div class="page-container">
      <article>
        <h1>{{ page.title }}</h1>
        {{ content }}
      </article>
    </div>
  </main>
  <footer>
    <p>&copy; {{ site.time | date: "%Y" }} {{ site.title }}. All rights reserved.</p>
  </footer>
  <script>
  window.addEventListener("load", function(){
    // Minimal client-side geo check: show consent only in EU/EEA; otherwise load GA immediately.
    const consentRequiredCountries = [
      // EU + EEA
      "AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO",
      // UK, Switzerland
      "GB","CH",
      // Other major jurisdictions with cookie consent requirements
      "CA","BR","AR","CL","CO","MX","PE","UY","ZA","AU","NZ","JP","KR","SG","TH","MY","PH","ID","VN","IN","IL","AE","SA","EG","NG","KE","GH","MA","TN"
    ];

    function loadCookieConsentAssets(callback){
      if (window.__ccLoaded) { callback(); return; }
      var ccCss = document.createElement('link');
      ccCss.rel = 'stylesheet';
      ccCss.href = 'https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css';
      var ccScript = document.createElement('script');
      ccScript.defer = true;
      ccScript.src = 'https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js';
      ccScript.onload = function(){ window.__ccLoaded = true; callback(); };
      document.head.appendChild(ccCss);
      document.head.appendChild(ccScript);
    }

    function showConsentBanner() {
      loadCookieConsentAssets(function(){
        if (!window.cookieconsent) { return; }
        window.cookieconsent.initialise({
        palette: { popup: { background: "#000" }, button: { background: "#f1d600" } },
        type: "opt-in",
        content: {
          message: "This site uses cookies to analyze traffic.",
          dismiss: "Accept",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          href: "{{ '/privacy-policy/' | relative_url }}"
        },
        onInitialise: function(status) { if (status === "allow") { loadAnalytics(); } },
        onStatusChange: function(status) { if (status === "allow") { loadAnalytics(); } }
        });
      });
    }

    // Fallback strategy: on error, show consent banner.
    function handleGeoError() { showConsentBanner(); }

    fetch("https://ipapi.co/json/")
      .then(function(res){ return res.ok ? res.json() : Promise.reject(); })
      .then(function(data){
        var code = (data && data.country_code) ? String(data.country_code).toUpperCase() : "";
        if (consentRequiredCountries.indexOf(code) !== -1) {
          showConsentBanner();
        } else {
          loadAnalytics();
        }
      })
      .catch(handleGeoError);
  });

  function loadAnalytics(){
    if (window.__gaLoaded) { return; }
    window.__gaLoaded = true;
    var gtagScript = document.createElement('script');
    gtagScript.async = true;
    gtagScript.src = "https://www.googletagmanager.com/gtag/js?id=G-DQ0BJBBLMS";
    document.head.appendChild(gtagScript);
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'G-DQ0BJBBLMS');
  }
  </script>
</body>

</html>